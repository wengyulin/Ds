(function(c){var e={}.toString,g=[].slice,b=c.navigator.userAgent.toLowerCase();if(!Array.prototype.forEach){Array.prototype.forEach=function(o,i){var l,j;if(this==null){throw new TypeError(" this is null or not defined")}var n=Object(this);var h=n.length>>>0;if(!f.isFunction(o)){throw new TypeError(o+" is not a function")}if(i){l=i}j=0;while(j<h){var m;if(j in n){m=n[j];o.call(l,m,j,n)}j++}};Array.prototype.map=function(j){var h=this.length;if(!f.isFunction(j)){throw new TypeError()}var m=new Array(h);var l=arguments[1];for(var k=0;k<h;k++){if(k in this){m[k]=j.call(l,this[k],k,this)}}return m};Array.prototype.filter=function(j){var h=this.length;if(!f.isFunction(j)){throw new TypeError()}var m=new Array();var l=arguments[1];for(var k=0;k<h;k++){if(j.call(l,this[k])){m.push(this[k])}}return m}}function d(h){this.callback=h}d.prototype={then:function(h,i){this.s=h;this.f=i;if(f.isFunction(this.callback)){this.callback.call(this,this.resolve,this.reject)}},resolve:function(h){if(f.isFunction(this.s)){this.s.call(this,h)}},reject:function(h){if(f.isFunction(this.f)){this.f.call(this,h)}}};var a={isDebug:false,rootUrl:"/",dcomRootUrl:"static/dcom/"};function f(){}f.extend=function(k,i){var h=typeof i;if(typeof k!=="object"&&!$.isFunction(k)){k={}}if(h==="undefined"||h==="boolean"){i=k;k=this}for(var j in i){if(i.hasOwnProperty(j)){k[j]=i[j]}}return k};f.extend({VERSION:"2.0.0",CONFIG:a,guid:0,Cache:{},Promise:c.Promise||d,getBrowerV:function(){if(!f.isEmpty(f._browerVersion)){return f._browerVersion}var h=f._browerVersion={},i=b;var j;(j=i.match(/msie ([\d.]+)/))?h.ie=j[1]:(j=i.match(/firefox\/([\d.]+)/))?h.firefox=j[1]:(j=i.match(/chrome\/([\d.]+)/))?h.chrome=j[1]:(j=i.match(/opera.([\d.]+)/))?h.opera=j[1]:(j=i.match(/version\/([\d.]+).*safari/))?h.safari=j[1]:0;return h},isIE8:function(){var h=f.getBrowerV();return h.ie?(parseInt(h.ie)<9?true:false):false},isIE7:function(){var h=f.getBrowerV();return h.ie?(parseInt(h.ie)<8?true:false):false},getGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(j){var i=Math.random()*16|0,h=j=="x"?i:(i&3|8);return h.toString()}).toUpperCase()},setG:function(j,l){function k(q,o,n){var p=o.split(">");var m=p.length;if(m==1){q[p[0]]=n}else{if(m==2){q[p[0]]?"":(q[p[0]]={});q[p[0]][p[1]]=n}}}if(typeof j=="string"){var i=j.split("/");var h=i.length;switch(h){case 1:k(f.Cache,i[0],l);break;case 2:f.Cache[i[0]]?"":(f.Cache[i[0]]={});k(f.Cache[i[0]],i[1],l);break;case 3:f.Cache[i[0]]?"":(f.Cache[i[0]]={});f.Cache[i[0]][i[1]]?"":(f.Cache[i[0]][i[1]]={});k(f.Cache[i[0]][i[1]],i[2],l);break}}},getG:function(j){if(typeof j=="string"){var i=j.split("/");var h=i.length;try{switch(h){case 1:return f.Cache[i[0]];break;case 2:return f.Cache[i[0]][i[1]];break;case 3:return f.Cache[i[0]][i[1]][i[2]];break}}catch(k){return"undefined"}}},_getGArr:function(i){var h=f.getG(i);if(f.isEmpty(h)||!f.isArray(h)){h=[]}return h},pushG:function(i,h){var j=f._getGArr(i);j.push(h);f.setG(i,j);return j},popG:function(h){var i=f._getGArr(h);i.pop();f.setG(h,i);return i},shiftG:function(h){var i=f._getGArr(h);i.shift();f.setG(h,i);return i},unshiftG:function(i,h){var j=f._getGArr(i);j.unshift(h);f.setG(i,j);return j},isUndefined:function(h){return e.call(h)=="[object Undefined]"},isBoolean:function(h){return e.call(h)=="[object Boolean]"},isNumber:function(h){return e.call(h)=="[object Number]"},isString:function(h){return e.call(h)=="[object String]"},isArray:function(h){return e.call(h)=="[object Array]"},isFunction:function(h){return e.call(h)=="[object Function]"},isObject:function(h){return e.call(h)=="[object Object]"},isEmpty:function(h){if(typeof h=="undefined"){true}if(h==null){return true}if(typeof h=="string"){if(/^\s*$/g.test(h)){return true}}if(f.isArray(h)){if(h.length==0){return true}}if($.isPlainObject(h)){for(var j in h){return false}return true}},removeFrom:function(h,i){if(f.isArray(h)){h=h.filter(function(j){return j!=i})}return h},include:function(i,h,o){o=o||f;i=f.isArray(i)?i:i.split(",");var n=[];i.forEach(function(q){var p=[];if(q.indexOf(",")!=-1){p=q.split(",")}else{p=[q]}n=n.concat(p)});n=n.map(function(p){if(p.indexOf(".js")!=-1){return{file:p,type:"js"}}else{if(p.indexOf(".css")!=-1){return{file:p,type:"css"}}else{return{file:p+".js",type:"js"}}}});if(f.isFunction(h)){var j=[];var l=function(q){var p=q.shift();if(f.isEmpty(p)){h.call(o,j);return}var r=f[p.type=="css"?"_loadCssFile":"_loadJsFile"](p.file,h).then(function(s){if(!f.isUndefined(s)){j.push(s)}l(q)})};l(n)}else{for(var k in n){var m=n[k];if(m.type=="css"){f.addCssToHead(m.file,h,o,k)}else{f.addJsToBodyLast(m.file,h,o,k)}}}},debug:function(h){var i=f.E("g_debug");if(!i){i=f.addDivToBody("g_debug");i.style.display="none"}if(f.isEmpty(h)){h=null}h===null?$(i).empty():$(i).append(h.toString())},addDivToBody:function(k,h){h=h||"div";var i=document.getElementsByTagName("BODY").item(0);var j=document.createElement(h);j.setAttribute("id",k);j.guid=f.guid++;i.appendChild(j);return j},_putLoadFileToCache:function(i){var j=f._getGArr("includeFileCache/list");
var h=[];j.forEach(function(k){if(k["file"]==i["file"]){h.push(i)}else{h.push(k)}});j=h;f.setG("includeFileCache/list",j)},_inLoadedFileQuque:function(h){var j=f._getGArr("includeFileCache/list");var i=false;j.forEach(function(k){if(k["file"]==h){i=true}});return i},_removeLoadFileFromCache:function(i){var j=f._getGArr("includeFileCache/list");var h=[];j.forEach(function(k){if(k["file"]!=fn["file"]){h.push(k)}});j=h;f.setG("includeFileCache/list",j)},_setLoadFileStatus:function(i,h){var j={file:i,isload:h};f._putLoadFileToCache(j)},_getLoadFileStatus:function(h){var i=f._getGArr("includeFileCache/list");i.forEach(function(j){if(j["file"]!=h){return j["isload"]||0}})},_loadCssFile:function(h,i){return f._dyLoadFile(h,i,"css")},_loadJsFile:function(i,h){return f._dyLoadFile(i,h,"js")},_dyLoadFile:function(h,j,i){var k=null;return k=new f.Promise(function(q,p){if(f._inLoadedFileQuque(h)){var r=null,m=f.getTime();var l=window.setTimeout(r=function(){if(f._getLoadFileStatus(h)==1){q.call(k);window.clearTimeout(l);return}var t=f.getTime();if((t-m)>1000){window.clearTimeout(l);return}window.setTimeout(r,10)},0);return}f._putLoadFileToCache({file:h,isload:0});if(i=="css"){var o=document.getElementsByTagName("HEAD").item(0);var s=document.createElement("link");s.type="text/css";s.href=h;s.rel="stylesheet";o.appendChild(s)}else{var n=document.getElementsByTagName("BODY").item(0);var s=document.createElement("script");s.type="text/javascript";s.src=h;n.appendChild(s)}s.guid=f.getGuid();if(f.isFunction(j)){if(f.isIE8()){s.onreadystatechange=function(){if(s.readyState=="loaded"||s.readyState=="complete"){q.call(k,s);f._setLoadFileStatus(h,1)}}}else{s.onload=function(){q.call(k,s);f._setLoadFileStatus(h,1)}}}});return k},addCssToHead:function(h,i,j,k){f._loadCssFile(h,i).then(function(l){i.call(j,l,k)})},addJsToBodyLast:function(j,h,i,k){f._loadJsFile(j,h).then(function(l){h.call(i,l,k)})},fetchObjByKeys:function(j,l){if(f.isString(j)){j=j.split(",")}var i={};if(f.isArray(j)){for(var h in j){if(l.hasOwnProperty&&l.hasOwnProperty(j[h])){i[j[h]]=l[j[h]]}else{i[j[h]]=l[j[h]]}}}l=i;return i},getViewSize:function(j){j=typeof j=="undefined"?document.documentElement:(typeof j=="string"?document.getElementById(j):j);var i,k;if(j==document.documentElement){i=i?i:document.body.scrollTop;k=k?k:document.body.scrollLeft}var h=window.screen;f.fetchObjByKeys("clientWidth,clientHeight,offsetWidth,offsetHeight",j);j.screen=h;j.scrollTop=i;j.scrollLeft=k;return j},registGlobalEvent:function(){function h(i){return function(l){var j=f.getG("Event/"+i);if(!$.isEmpty(j)){for(var k in j){if($.isFunction(j[k])){j[k].call(this,l)}}}}}if(f._isregistglobalevent){return}f._isregistglobalevent=true;$(window).bind("scroll",h("scrollFunc")).bind("resize",h("resizeFunc"));$(window).unload(h("rootUnloadFunc"));$(document).bind("click",h("rootclickFunc"));$(document).bind("mousedown",h("rootmousedownFunc"));$(document).bind("mouseup",h("rootmouseupFunc"));$(document).bind("keyup",h("rootkeyupFunc"));$(document).bind("downup",h("rootkeydownFunc"))},E:function(h){if(typeof h=="string"){return document.getElementById(h)}else{if(typeof h=="object"){return h}}return null},Ajax:function(n,j,h,o,p,m,l,k){try{$.ajax({"url":n,data:j,dataType:h,type:o,success:p,async:m,beforeSend:l,complete:k})}catch(i){}},centerWindow:function(k,j,m){var n=f.getViewSize();var l=(n["clientHeight"]-m)/2;l=l<0?0:l;var i=n["scrollTop"]+l;var o=Math.abs((n["clientWidth"]-j)/2);k.style.left=o+"px";k.style.top=i+"px"},yzAvail:function(o,l,n,k){var j=1;if(typeof n=="string"){var m=n.split("-");var j=parseInt(m[0]);var n=parseInt(m[1])}else{n=n||100}var i=$(o).val();if($.isEmpty(i)||i==k){f.alert(l+"不能为空","error");$(o).focus();return false}else{if(/\<|\'/g.test(i)){f.alert(l+"不能输入非法字符","error");$(o).focus();return false}}var h=i.length;if(h<j){f.alert(l+"不能低于"+j+"个字","error");return}if(h>n){f.alert(l+"不能超过"+n+"个字","error");return false}return true},addHidenField:function(k,h,i,j){if(j){$(k).append('<textarea style="display:none;" name="'+h+'" >'+i+"</textarea>")}else{$(k).append('<input name="'+h+'" value="'+i+'" type="hidden" />')}},strToTime:function(i){if(i===0){return 0}if(i){var l=i.split("-");if(l[1].substr(0,1)==0){var k=parseInt(l[1].substr(1,1))-1}else{var k=parseInt(l[1])-1}var m=new Date(l[0],k,l[2]);return m.getTime()}else{var m=new Date();var j=m.getFullYear();var k=m.getMonth();var h=m.getDate();m=new Date(j,k,h);return m.getTime()}},getDJSformat:function(l){if(!/^\d+$/g.test(l)){l=f.strToTime(l)}else{l=l*1000}var n=new Date();var o=n.getTime();if(o>l){return"已过期"}var h=(l-o)/1000;var j=Math.floor(h/(3600*24));if(j>365*10){return"不限天数"}h=h-j*3600*24;var i=Math.floor(h/3600);h=h-i*3600;var m=Math.floor(h/60);h=h-m*60;var k=parseInt(h);return j+"天"+i+"时"+m+"分"+k+"秒"},getImageSize:function(k,j){var h=new Image();h.src=k;if($.isFunction(j)){if(h.complete){j({w:h.width,h:h.height,src:k})}else{h.onload=function(){j({w:h.width,h:h.height,src:k})}}}else{return{w:h.width,h:h.height,src:k}
}},GU:function(n,m){if($.isPlainObject(n)){if(!n["m"]){return}var l=n["g"]||"index.php";n["g"]=null;n["r"]=n["r"]||"";n["o"]=n["o"]||"";var j=3;var i=[];if(j==3&&$.inArray(l,["index.php","index","wap.php","weixin","wap","weixin.php"])!=-1){i[0]=n["m"];i[1]=n["r"];n["o"]?i.push(n["o"]):"";n["m"]=null;n["r"]=null;n["o"]=null;for(var h in n){if(n[h]!=null&&!$.isEmpty(n[h])){i.push(h);i.push(encodeURIComponent(n[h]))}}i=i.join("/");l=l.split(".")[0];i="/"+l+"/"+i}else{for(var h in n){if(n[h]!=null&&!$.isEmpty(n[h])){i.push(h+"="+encodeURIComponent(n[h]))}}i=i.join("&");i="/"+l+"?"+i}}else{i=n}if(m){document.write(i)}else{return i}},getTime:function(){return(new Date()).getTime()}});f.Ui={scrollPage:function(j,i){if(typeof j=="undefined"){j=0}else{if(typeof j=="number"){}else{if(typeof j=="string"){if(/^\d+$/.test(j)){j=parseInt(j)}else{j=$(j).offset().top}}}}i=i||100;try{$(document.documentElement).animate({scrollTop:j},i);$(body).animate({scrollTop:j},i)}catch(h){}}};f.attach={};f.dcom={registComs:{},callc:function(i,l,o){o=o||"";var n=f.dcom.getCom(i);if(n!=null){if(f.isFunction(l)){l.call(f.dcom)}else{try{n["callouti"](l,o)}catch(k){alert("组件接口未实现"+k,"error")}}}else{var j=f.CONFIG.dcomRootUrl+"dcom-"+i+".js";var h=f.CONFIG.dcomRootUrl+"css/dcom-"+i+".css";if(f.CONFIG.isDebug){var m="?"+Math.random();j+=m;h+=m}f.include([h,j],function(q){var r=f.dcom.getCom(i);if(r!=null){r.bindDoms=q;if(f.isFunction(l)){l.call(f.dcom)}else{try{r["callouti"](l,o)}catch(p){alert("组件接口未实现"+p,"error")}}}})}},addCom:function(h,i){f.dcom.registComs["dcom-"+h]=i;i.dcomobjstr="Ds.dcom.registComs.dom-"+h},getCom:function(h){return f.dcom.registComs["dcom-"+h]||null},removeCom:function(h){var i=f.dcom.registComs["dcom-"+h];if(i.bindDoms){i.bindDoms.map(function(j){$(j).remove()})}if(f.isFunction(i.distroy)){i.distroy()}i=null}};f.dlg=function(h){return f.dcom.callc("sys-dlg","open",h)};f.alert=function(j,h,k,i){return f.dcom.callc("sys-alert","open",{tip:j,type:h||"",time:k||2000,func:i||null})};f.request=function(j,n,m,k,l,h,i){f.dcom.callc("sys-request","open",{u:j,d:n||{},dt:m||"",t:k||"get",s:l||null,a:h,st:i||1})};f.extend(c,{Ds:f})})(window);